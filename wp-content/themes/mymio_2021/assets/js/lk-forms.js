!function(e){var t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";const a="https://aeqlmvgvlxcee.elma365.ru/api/extensions/3d15932c-766e-4e91-b8ff-fed442649de2/script/get/appgs?id="+$("#elma-id").html();!async function(){try{const e=await async function(e){return await fetch(e,{method:"GET",headers:{"Content-Type":"application/json","X-Token":"8657d620-f5eb-4552-997d-d3ec43688c29"}})}(a),t=await e.json(),n=await Object.entries(t);for(const[e,t]of n){$(`[data-info=${e}]`).html(t)}}catch(e){throw console.log(e),e}}()},function(e,t){jQuery(".select").length>1?(jQuery("select").each((function(){let e=jQuery(this).not(".select-search"),t=jQuery(this).not(".select-search").parents(".select");e.select2({minimumResultsForSearch:1/0,dropdownParent:t})})),jQuery(".select-search").each((function(){let e=jQuery(this),t=jQuery(this).parents(".select");e.select2({dropdownParent:t})}))):jQuery("select").select2({minimumResultsForSearch:1/0,dropdownParent:jQuery(".select")}),$(".select").parent().on("click",(function(){const e=$(this),t=e.find(".select-input");e.find(".select2-selection__rendered").on("DOMSubtreeModified",(function(){const e=$(this).html();e.includes("Другое")?t.addClass("active"):!e.includes("Другое")&&t.hasClass("active")&&t.removeClass("active")}))}))},function(e,t){$(".contact-form__form-field.check").each((function(){const e=$(this).find('input[type="checkbox"]'),t=$(this).find('input[type="hidden"]'),n=$(this).find('input[type="text"]');e.each((function(){$(this).on("change",(function(){const e=$(this).prop("checked"),n=t.val();if(e)return n.includes($(this).val())?void 0:(t.val(`${n} | ${$(this).val()}`),void console.log(t.val()));if(n.includes($(this).val())){const e=n.replace(" | "+$(this).val(),"");t.val(e),console.log(t.val())}}))})),n.on("focus",(function(){if(""===$(this).val())return;const e=t.val();if(e.includes($(this).val())){const n=e.replace(" | "+$(this).val(),"");t.val(n),console.log(t.val())}})),n.on("blur",(function(){if(""===$(this).val())return;const e=t.val();t.val(`${e} | ${$(this).val()}`),console.log(t.val())}))}))},function(e,t){jQuery("#datepicker").datepicker({changeMonth:!0,changeYear:!0,showButtonPanel:!0,minDate:new Date(90,0,1),monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Не",dateFormat:"dd.mm.yy",firstDay:1,onSelect:function(){const e=$(this).val();$(".date-mask").val(e),jQuery("#datepicker").toggleClass("active")}}),jQuery(".calendar").on("click",(function(){$(this).toggleClass("active"),$("#datepicker").toggleClass("active")}))},function(e,t){!function(){const e=document.querySelector(".train"),t=$(".train__hide-input"),n=[...document.querySelectorAll(".train__item_inner")];let a=null,s=null;function i(e,t){c(e,t);const a=[...document.querySelectorAll(".train__item.active")];if(a.length&&a.forEach(e=>e.classList.remove("active")),e===t)return e=null,void(t=null);n.forEach(n=>{const a=parseInt(n.innerHTML);a>=e&&a<=t&&n.parentElement.classList.add("active")})}function c(e=0,n=0){const a=e?e+"":0,s=n?n+"":0;a?s?t.val(`${a}-${s}`):t.val(a):t.val("")}e.addEventListener("click",(function(e){const t=e.target;if(!t.classList.contains("train__item_inner"))return;const n=parseInt(t.innerHTML);if(!a)return a=n,t.parentElement.classList.add("active"),void c(a,s);if(a===n||s===n)return void i(0,0);a>n?(s=a,a=n,i(a,s)):n>a&&n<s?(a=n,i(a,s)):(s=n,i(a,s))}))}()},function(e,t,n){"use strict";n.r(t);n(0),n(1),n(2),n(3),n(4);const a=async()=>{try{const e=await fetch(homeUrl+"/mkb.json"),t=await e.json();return await t}catch(e){console.log(e)}};window.addEventListener("click",(function(e){const t=e.target,n=document.querySelector(".tips.active")||null;n&&(t.classList.contains("tip")||t.classList.contains("city")||n.classList.remove("active"))}));const s=e=>{console.log(e);const t=document.querySelector(".tips");t.innerHTML="",e.forEach(e=>{const n=document.createElement("span");n.classList.add("tip"),n.innerHTML=e.title,n.addEventListener("click",i),t.appendChild(n)})},i=function(e){document.querySelector('[data-elma="mank_accompanying_diagnosis_2"]').value=this.innerHTML,(()=>{const e=$(".tips.active");e&&e.removeClass("active")})()},c=(e,t)=>{$(e).each((function(){$(this).on("click",(function(n){if(n.preventDefault(),$(this).hasClass("active"))return;const a=$(this).data("tab"),s=$(`${t}[data-form="${a}"]`);var i,c;$(e+".active").removeClass("active"),$(t+".active").removeClass("active"),$(this).addClass("active"),s.addClass("active"),i=e,c=`${t}, ${a}`,window.localStorage.setItem(i,c)}))}))},o=e=>{const t=(n=e,window.localStorage.getItem(n));var n;if(!t)return;const a=t.split(","),s=a[0],i=a[1];r(e,s,i)},r=(e,t,n)=>{const a=Number(n),s=$(e)[a-1],i=$(t+"[data-form]")[a-1];$(s).hasClass("active")||($(e+".active")&&($(e+".active").removeClass("active"),$(t+".active").removeClass("active")),$(s).addClass("active"),console.log($(i)),$(i).addClass("active"))},l=e=>{const t=$(e).find('[data-req="true"]'),n=Object.create({});return t.each((function(){const e=$(this).attr("name");let t={value:{required:!0}};switch($(this).data("validation")){case"email":t={value:{required:!0,email:!0}};break;case"name":t={value:{required:!0,_name:!0}}}Object.defineProperty(n,e,t)})),n},d=(e,t)=>{const n=t.data("elma");if(""===n)return;const a=t.val();Object.defineProperty(e,n,{value:a,enumerable:!0})},u=e=>{const t=e.find("[data-elma]"),n=Object.create({});return Object.defineProperty(n,"context",{value:{},enumerable:!0}),t.each((function(){if($(this).is("select")){if($(this).val().includes("Другое")){const e=$(this).parent().parent(),t=$(e).find(".select-input .select-input__input"),a=$(this).data("elma");return t.data("elma",a),void d(n.context,t)}}("radio"!==$(this).attr("type")||$(this).prop("checked"))&&d(n.context,$(this))})),n};jQuery("form.contact-form__form").each((function(){const e=l(jQuery(this)),t=$(this);jQuery(this).validate({ignore:[],errorClass:"error",validClass:"success",rules:e,errorElement:"span",errorPlacement:function(e,t){const n=jQuery(t).data("error");n?jQuery(n).append(e):e.insertBefore(t)},submitHandler:function(){t.find(".loader").addClass("active");const e=parseInt(t.parent().parent().parent().data("form"));console.log(t);const n=`https://aeqlmvgvlxcee.elma365.ru/api/extensions/3d15932c-766e-4e91-b8ff-fed442649de2/script/ward/${e?"medical":"main"}/update`,a=u(t),s=$("#elma-id").html();let i;i=e?JSON.stringify({id:s,form_id:e,context:a.context}):JSON.stringify({id:s,context:a.context}),((e,t)=>{const n=$(`[name=${e}]`).val();t.forEach(e=>{const t=$(`[name=${e}]`);t.val()||t.val(n)})})("main_info_address_reg_pod",["main_info_address_act_pod","main_info_address_mail_pod"]),fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 8657d620-f5eb-4552-997d-d3ec43688c29"},body:i}).then(e=>e.json()).then(e=>{console.log(e),((e,t)=>{const n=t.find(".loader"),a=t.find(".result");if("success"===e)return t.trigger("reset"),a.html("Ваша анкета успешно отправлена!"),a.hasClass("success")&&a.removeClass("success"),a.addClass("success"),n.removeClass("active"),!0;a.html("Ошибка отправки. Проверьте данные или попробуйте позже."),a.addClass("err"),n.removeClass("active")})(e.msg,t)}).catch((function(e){console.log("Request failed",e)}))}})})),jQuery.validator.addMethod("email",(function(e,t){return this.optional(t)||/\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,6}/.test(e)}),"Некорректный e-mail"),jQuery.validator.addMethod("_name",(function(e,t){return this.optional(t)||/^[а-яА-ЯёЁ\s]+$/.test(e)}),"Введите корректное имя");$("[data-cond-relation]").each((function(){$(this);const e=$(this).data("condRelation"),t=$(`[data-cond-dep-name="${e}"]`);$(this).on("change",(function(){let e=$(this).val();"checkbox"===$(this).attr("type")?e=$(this).prop("checked"):"radio"===$(this).attr("type")&&(e="Да"===$(this).val()),t.each((function(){const t=$(this).data("condDepValue");t===e&&$(this).hasClass("show")||(t!==e||$(this).hasClass("show")?$(this).removeClass("show"):$(this).addClass("show"))}))}))})),o(".lk-tab"),o(".lk-form__tab"),c(".lk-tab",".lk-form"),c(".lk-form__tab",".lk-form__tab_content"),jQuery(".phone-mask").inputmask({mask:"+7(999)999-99-99",clearIncomplete:!0}),jQuery(".date-mask").inputmask({mask:"99.99.9999",clearIncomplete:!0}),(async e=>{const t=$(`[data-elma="${e}"]`);if(!t)return;const n=await a();t.on("keypress",(function(){const e=$(this).val().toLowerCase(),t=$(this).parent().find(".tips");if(e.length<2)return;t.hasClass("active")||t.addClass("active");const a=n.filter(t=>t.title.toLowerCase().includes(e));s(a)}))})("mank_accompanying_diagnosis_2")}]);